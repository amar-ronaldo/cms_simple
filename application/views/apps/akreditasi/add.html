<script src="{base_url}asset\js\ckfinder\ckfinder.js"></script>
<div class='row page-title mb-2'>
	<div class='page-title-left'>
		<h4 class='page-title-heading'>{page_title}</h4>
	</div>
	{btn_process}
</div>

<div class="body-table section-row">
	<div class="row">
		<div class="widget-bg">
			<div class="widget-body clearfix">
				<form action='{this_controller}process/{id}' class="form-horizontal" method='post' id='form1' autocomplete="off">
					<div class="form-group row">
						<label class="col-md-3 col-form-label" for="l0">{lang_title} <i class='req'>*</i></label>
						<div class="col-md-9">
							<textarea class="form-control" name="title" id="title" data-parsley-required="true">{title}</textarea>
						</div>
					</div>
					<div class="form-group row">
						<label class="col-md-3 col-form-label" for="l0">File <i class='req'>*</i></label>
						<div class="col-md-8 form-inline">
							<input id="ckfinder-input-1" type="text" name="file" class="form-control col-md-6" value="{file}"> &nbsp;
							<button id="ckfinder-popup-1" class="btn btn-primary" type="button">Browse Server</button>
						</div>
					</div>
					<div class="form-group row">
						<label class="col-md-3 col-form-label" for="l0">Kurun Waktu <i class='req'>*</i></label>
						<div class="col-md-4 form-inline">
							<input type="text" class="form-control datepicker" data-date-format="yyyy-mm-dd" name="kurun_waktu_awal" id="kurun_waktu_awal" value="{kurun_waktu_awal}">
							S/d
							<input type="text" class="form-control datepicker" data-date-format="yyyy-mm-dd" name="kurun_waktu_akhir" id="kurun_waktu_akhir" value="{kurun_waktu_akhir}">
						</div>
					</div>
					<div class="form-group row">
						<label class="col-md-3 col-form-label" for="l0">{lang_publish_date} <i class='req'>*</i></label>
						<div class="col-md-9">
							<input type="text" class="form-control datepicker" data-date-format="yyyy-mm-dd" name="publish_date" id="publish_date" value="{publish_date}" data-parsley-required="true">
						</div>
					</div>
					<div class="form-group row">
						<label class="col-md-3 col-form-label" for="l0">{lang_status} <i class='req'>*</i></label>
						<div class="col-md-9">
							<select class='form-control' id="id_ref_status_publish" name="id_ref_status_publish" data-parsley-required="true">{list_status}</select>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<script>
	$(document).ready(function () {
		var button1 = document.getElementById('ckfinder-popup-1');
		button1.onclick = function () {
			selectFileWithCKFinder('ckfinder-input-1');
		};
		function selectFileWithCKFinder(elementId) {
			CKFinder.popup({
				chooseFiles: true,
				width: 800,
				height: 600,
				onInit: function (finder) {
					finder.on('files:choose', function (evt) {
						var file = evt.data.files.first();
						var output = document.getElementById(elementId);
						output.value = file.getUrl();
					});
	
					finder.on('file:choose:resizedImage', function (evt) {
						var output = document.getElementById(elementId);
						output.value = evt.data.resizedUrl;
					});
				}
			});
		}
	})
</script>
